var sidebarLinks=function(baseUlID,headerLinkClass,maxDepth){this.baseUlID=typeof baseUlID!=="undefined"?baseUlID:"sidebar-links";this.headerLinkClass=typeof headerLinkClass!=="undefined"?headerLinkClass:null;this.maxDepth=typeof maxDepth==="number"&&maxDepth>1&&maxDepth<=6?maxDepth:6;this.init=function(){if(this.headerLinkClass===null){this.headerLinkClass="sidebar-link";for(var i=1;i<this.maxDepth+1;i++){var els=document.getElementsByTagName("h"+i);for(var id in els){if(els[id].className===""){els[id].className=this.headerLinkClass}else{els[id].className+=" "+this.headerLinkClass}}}}var regex=new RegExp("[H|h][1-"+this.maxDepth+"]","g");var linksUl=document.getElementById(this.baseUlID);var headers=document.getElementsByClassName(this.headerLinkClass);var prevLevel=1;var prevUlID=linksUl.id;for(var i=0;i<headers.length;i++){var newLi=this.createListItem(headers[i],i);var curLevel=parseInt(headers[i].tagName.match(regex)[0].slice(-1));if(curLevel===1){prevUlID=linksUl.id;linksUl.appendChild(newLi)}else if(curLevel>1&&curLevel<=7){if(curLevel===prevLevel&&prevUlID!==null){document.getElementById(prevUlID).appendChild(newLi)}else if(curLevel<prevLevel&&prevUlID!==null){while(prevLevel!=curLevel&&prevLevel>1){prevUlID=document.getElementById(prevUlID).parentElement.id;prevLevel--}document.getElementById(prevUlID).appendChild(newLi)}else if(curLevel>prevLevel){var newUlObj=this.createNewUlItem(newLi,i,curLevel,prevLevel);document.getElementById(prevUlID).appendChild(newUlObj[1]);prevUlID=newUlObj[0]!==null?newUlObj[0]:prevUlID}else{console.log("Something broke, probably because previous UL was null. This shouldn't happen. prevUlID: "+prevUlID)}}else{console.log("Something broke; link cannot be appended. This shouldn't happen. curLevel: "+curLevel)}prevLevel=curLevel}};this.createListItem=function(headerItem,headerIndex){var newLi=document.createElement("li");var link=document.createElement("a");link.innerHTML=headerItem.innerText;if(headerItem.id===""){headerItem.id="header-"+headerIndex.toString().padStart(3,"0")}link.href="#"+headerItem.id;newLi.appendChild(link);return newLi};this.createNewUlItem=function(listItem,listItemNum,curLevel,prevLevel){if(curLevel>0&&curLevel<=7&&prevLevel>0&&prevLevel<=7&&prevLevel<curLevel){var newUl=document.createElement("ul");var prevUlID=newUl.id=listItemNum+"-"+curLevel;newUl.appendChild(listItem);if(prevLevel+1<curLevel){while(prevLevel!=curLevel-1&&prevLevel<6){var tempUl=document.createElement("ul");prevLevel++;tempUl.id="n"+listItemNum+"-"+prevLevel;tempUl.appendChild(newUl);newUl=tempUl}}return[prevUlID,newUl]}else{return[null,listItem]}};this.init()};